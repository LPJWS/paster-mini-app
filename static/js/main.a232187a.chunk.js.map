{"version":3,"sources":["panels/Top.js","panels/Home.js","panels/Marks.js","App.js","index.js"],"names":["Top","props","useState","pastes","setPastes","users","setUsers","you","setYou","popout","setPopout","activeTab","setActiveTab","useEffect","fetch","then","response","ok","Error","statusText","json","catch","err","console","log","fetchedUser","id","activePanel","left","onClick","go","selected","header","mode","vk_id","before","photo_200","src","description","cnt","avg","first_name","last_name","map","paste","index","gopanel","style","marginBottom","rating","disabled","anno","user","name","Home","pastePreloaded","setPaste","snackbar","setSnackbar","React","activeStory","setActiveStory","onStoryChange","e","currentTarget","dataset","payload","getPasteById","story","getPaste","a","paste_id","relatePaste","mark","method","headers","body","JSON","stringify","onClose","tabbar","text","size","padding","margin","clear_text","width","height","pic_link","display","stretched","marginRight","paddingBottom","bridge","send","link","filled","vertical","Marks","options","month","day","hour","minute","member","marks","date","Date","created_at","toLocaleString","alignItems","textAlign","App","setActivePanel","setUser","setPastePreloaded","setMember","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","attributes","setNamedItem","fetchData","to","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.a232187a.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport bridge from '@vkontakte/vk-bridge';\n\nimport { Panel, PanelHeader, PanelHeaderBack, Group, Header, View, ScreenSpinner, Div, Card, Cell, Avatar, Tabs, TabsItem } from '@vkontakte/vkui';\n\nimport './Top.css';\n\nconst Top = props => {\n\tconst [pastes, setPastes] = useState([])\n\tconst [users, setUsers] = useState([])\n\tconst [you, setYou] = useState(null);\n\tconst [popout, setPopout] = useState(null);\n\tconst [activeTab, setActiveTab] = useState('paste');\n\n\n\tfunction getTop() {\n\t\tsetPopout(<ScreenSpinner/>)\n\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/paste/get/top/')\n\t\t  .then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText)\n\t\t\t\t}\n\t\t\t\treturn response.json()\n\t\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t  .then(pastes => {\n\t\t\tsetPopout(null)\n\t\t\tsetPastes(pastes)\n\t\t  })\n\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/member/get/top/')\n\t\t.then(response => {\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(response.statusText)\n\t\t\t}\n\t\t\treturn response.json()\n\t\t\t}).catch(err=>{\n\t\t\tconsole.log(err)\n\t\t})\n\t\t.then(users => {\n\t\tsetPopout(null)\n\t\tsetUsers(users)\n\t\t})\n\t}\n\n\tfunction getYou() {\n\t\tsetPopout(<ScreenSpinner/>)\n\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/member/get_vk/' + props.fetchedUser.id)\n\t\t  .then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText)\n\t\t\t\t}\n\t\t\t\treturn response.json()\n\t\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t  .then(you => {\n\t\t\tsetPopout(null)\n\t\t\tsetYou(you)\n\t\t  })\n\t}\n\n\tuseEffect(() => {\n\t\tgetTop()\n\t\tgetYou()\n\t  }, [])\n\n\treturn (\n\t\t<View activePanel={props.id} popout={popout}>\n\t\t\t<Panel id={props.id}>\n\t\t\t\t<PanelHeader\n\t\t\t\t\tleft={<PanelHeaderBack onClick={props.go} data-to=\"home\"/>}\n\t\t\t\t>\n\t\t\t\t\tТОП\n\t\t\t\t</PanelHeader>\n\t\t\t\t<Tabs>\n\t\t\t\t\t<TabsItem\n\t\t\t\t\t\tonClick={() => setActiveTab('paste')}\n\t\t\t\t\t\tselected={activeTab === 'paste'}\n\t\t\t\t\t>\n\t\t\t\t\t\tПасты\n\t\t\t\t\t</TabsItem>\n\t\t\t\t\t<TabsItem\n\t\t\t\t\t\tonClick={() => setActiveTab('member')}\n\t\t\t\t\t\tselected={activeTab === 'member'}\n\t\t\t\t\t>\n\t\t\t\t\t\tПользователи\n\t\t\t\t\t</TabsItem>\n              \t</Tabs>\n\t\t\t\t<Group header={<Header mode=\"secondary\">Это ты</Header>}>\n\t\t\t\t\t<Cell\n\t\t\t\t\t\tonClick={props.go}\n\t\t\t\t\t\tdata-to=\"marks\"\n\t\t\t\t\t\tdata-member={you ? you.vk_id : \"\"}\n\t\t\t\t\t\tbefore={props.fetchedUser.photo_200 ? <Avatar src={props.fetchedUser.photo_200}/> : null}\n\t\t\t\t\t\tdescription={you ? \"Всего оценок: \" + you.cnt + ', средняя: ' + you.avg : \"\"}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${props.fetchedUser.first_name} ${props.fetchedUser.last_name}`}\n\t\t\t\t\t</Cell>\n\t\t\t\t</Group>\n\t\t\t\t{activeTab === 'paste' && <Group header={<Header mode=\"secondary\">ТОП паст</Header>}>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpastes.map( (paste, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\t\tonClick={props.gopanel}\n\t\t\t\t\t\t\t\t\t\tdata-story=\"paste\"\n\t\t\t\t\t\t\t\t\t\tdata-payload={paste.id}\n\t\t\t\t\t\t\t\t\t\tkey={paste.id} \n\t\t\t\t\t\t\t\t\t\tstyle={{marginBottom: \".5rem\"}}\n\t\t\t\t\t\t\t\t\t\tdescription={\"Всего оценок: \" + paste.cnt + ', рейтинг: ' + paste.rating}\n\t\t\t\t\t\t\t\t\t\tbefore={<Cell disabled>{index+1}</Cell>}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{paste.anno} \n\t\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</Div>\n\t\t\t\t</Group>}\n\t\t\t\t{activeTab === 'member' && <Group header={<Header mode=\"secondary\">ТОП пользователей</Header>}>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tusers.map( (user, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\t\tonClick={props.go}\n\t\t\t\t\t\t\t\t\t\tdata-to=\"marks\"\n\t\t\t\t\t\t\t\t\t\tdata-member={user.vk_id}\n\t\t\t\t\t\t\t\t\t\tkey={user.id} \n\t\t\t\t\t\t\t\t\t\tstyle={{marginBottom: \".5rem\"}}\n\t\t\t\t\t\t\t\t\t\tdescription={\"Всего оценок: \" + user.cnt + ', средняя: ' + user.avg}\n\t\t\t\t\t\t\t\t\t\tbefore={<Cell disabled>{index+1}</Cell>}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{user.name} \n\t\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</Div>\n\t\t\t\t</Group>}\n\t\t\t</Panel>\n\t\t</View>\n\t)\n}\n\nTop.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n};\n\nexport default Top;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes, { func } from 'prop-types';\nimport bridge from '@vkontakte/vk-bridge';\n\nimport { Panel, PanelHeader, Header, Button, Group, Cell, Div, ScreenSpinner,\n\t Text, Avatar, Card, Snackbar, FixedLayout, Separator, View,\n\tEpic, Tabbar, TabbarItem } from '@vkontakte/vkui';\nimport { Icon16ReplyOutline } from '@vkontakte/icons';\nimport { Icon28Dice5Outline } from '@vkontakte/icons';\nimport { Icon28ViewOutline } from '@vkontakte/icons';\nimport { Icon16Mention } from '@vkontakte/icons';\nimport { Icon24CupOutline } from '@vkontakte/icons';\nimport { Icon16Favorite } from '@vkontakte/icons';\nimport { Icon28HomeOutline } from '@vkontakte/icons';\nimport { Icon28Flash } from '@vkontakte/icons';\n\nimport Top from './Top';\n\nconst Home = ({ id, go, fetchedUser, pastePreloaded }) => {\n\tconst [ paste, setPaste] = useState(null);\n\tconst [ snackbar, setSnackbar] = useState(null);\n\tconst [ popout, setPopout] = useState(null);\n\tconst [activeStory, setActiveStory] = React.useState('paste');\n\tconst onStoryChange = (e) => {\n\t\tif (e.currentTarget.dataset.payload) {\n\t\t\tgetPasteById(e.currentTarget.dataset.payload)\n\t\t}\n\t\tsetActiveStory(e.currentTarget.dataset.story);\n\t}\n\t\n\tfunction getRandPaste() {\n\t\tsetPopout(<ScreenSpinner/>)\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/paste/get/rand/')\n\t\t  .then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText)\n\t\t\t\t}\n\t\t\t\treturn response.json()\n\t\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t  .then(paste => {\n\t\t\tsetPopout(null)\n\t\t\tsetPaste(paste)\n\t\t  })\n\t}\n\n\tasync function getPaste() {\n\t\tsetPopout(<ScreenSpinner/>)\n\t\t// const params = window.location.search.slice(1);\n\t\t// console.log(params);\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/paste/get/unrelated/?vk_id=' + fetchedUser.id)\n\t\t  .then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText)\n\t\t\t\t}\n\t\t\t\treturn response.json()\n\t\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t  .then(paste => {\n\t\t\tsetPopout(null)\n\t\t\tsetPaste(paste)\n\t\t  })\n\t}\n\n\tfunction getPasteById(paste_id) {\n\t\tsetPopout(<ScreenSpinner/>)\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/paste/get/' + paste_id + '/')\n\t\t  .then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText)\n\t\t\t\t}\n\t\t\t\treturn response.json()\n\t\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t  .then(paste => {\n\t\t\tsetPopout(null)\n\t\t\tsetPaste(paste)\n\t\t  })\n\t}\n\n\tfunction relatePaste(mark) {\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/paste/relate/', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ id: paste.id, vk_id: fetchedUser.id, mark })\n\t\t})\n\t\t  .then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(response.statusText)\n\t\t\t\t}\n\t\t\t\treturn response.json()\n\t\t\t\t}).catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t})\n\t\t  .then(() => {\n\t\t\tsetSnackbar(\n\t\t\t\t<Snackbar\n\t\t\t\t\tonClose={() => setSnackbar(null)}\n\t\t\t\t>\n\t\t\t\t\tПаста оценена\n\t\t\t\t</Snackbar>\n\t\t\t)\n\t\t  })\n\t}\n\n\tfunction reply() {\n\t\tbridge.send(\"VKWebAppShare\", {\"link\": paste.link});\n\n\t\t// bridge.send(\"VKWebAppShowWallPostBox\", {\"message\": \"Hello!\", \"attachments\": \"wall-\"+paste.group+\"_\"+paste.post});\n\t}\n\n\tuseEffect(() => {\n\t\tif (pastePreloaded) {\n\t\t\tgetPasteById(pastePreloaded)\n\t\t}\n\t\telse {\n\t\t\tgetPaste()\n\t\t}\n\t  }, [])\n\n\treturn (\n\t\t<Epic activeStory={activeStory} tabbar={\n\t\t\t<Tabbar>\n\t\t\t  <TabbarItem\n\t\t\t\tonClick={onStoryChange}\n\t\t\t\tselected={activeStory === 'paste'}\n\t\t\t\tdata-story=\"paste\"\n\t\t\t\ttext=\"Пасты\"\n\t\t\t  ><Icon28HomeOutline /></TabbarItem>\n\t\t\t  <TabbarItem\n\t\t\t\tonClick={onStoryChange}\n\t\t\t\tselected={activeStory === 'top'}\n\t\t\t\tdata-story=\"top\"\n\t\t\t\ttext=\"ТОП\"\n\t\t\t  ><Icon28Flash/></TabbarItem>\n\t\t\t</Tabbar>\n\t\t}>\n\t\t\t<View id='paste' activePanel='paste' popout={popout}>\n\t\t\t\t<Panel id='paste'>\n\t\t\t\t\t<PanelHeader>ПАСТЕР</PanelHeader>\n\t\t\t\t\t{paste && \n\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Данную пасту оценили {paste.cnt} раз, рейтинг - {paste.rating}</Header>}>\n\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t<Card size=\"l\" mode=\"shadow\" style={{marginBottom:'1rem'}}>\n\t\t\t\t\t\t\t\t\t<Div style={{padding: '.5rem', margin: 'auto'}}>\n\t\t\t\t\t\t\t\t\t\t<p>{paste.clear_text}</p>\n\t\t\t\t\t\t\t\t\t\t<img style={{width: \"100%\", height: \"100%\"}} src={paste.pic_link} />\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t<Div style={{margin: 'auto'}}>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Оцените пасту</Header>}>\n\t\t\t\t\t\t\t\t<Div style={{display: 'flex'}}>\n\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"destructive\" onClick={() => {relatePaste(1)}}>\n\t\t\t\t\t\t\t\t\t\t1 <Icon16Favorite/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"destructive\" onClick={() => {relatePaste(2)}}>\n\t\t\t\t\t\t\t\t\t\t2 <Icon16Favorite/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"secondary\" onClick={() => {relatePaste(3)}}>\n\t\t\t\t\t\t\t\t\t\t3 <Icon16Favorite/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"commerce\" onClick={() => {relatePaste(4)}}>\n\t\t\t\t\t\t\t\t\t\t4 <Icon16Favorite/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"commerce\" onClick={() => {relatePaste(5)}}>\n\t\t\t\t\t\t\t\t\t\t5 <Icon16Favorite/>\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t<Div style={{paddingBottom: '9rem'}}>\n\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"primary\" onClick={() => {reply()}} before={<Icon16ReplyOutline/>}>\n\t\t\t\t\t\t\t\t\t\tПоделиться\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t{/* <Div style={{paddingBottom: '9rem'}}>\n\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"primary\" onClick={go} data-to=\"top\" before={<Icon24CupOutline/>}>\n\t\t\t\t\t\t\t\t\t\tОткрыть ТОП\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Div> */}\n\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t<FixedLayout filled vertical=\"bottom\">\n\t\t\t\t\t\t\t\t<Group header={<Header mode=\"secondary\">Получить пасту</Header>}>\n\t\t\t\t\t\t\t\t\t<Div style={{display: 'flex'}}>\n\t\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" style={{ marginRight: 8 }} mode=\"secondary\" onClick={\n\t\t\t\t\t\t\t\t\t\t\t() => {getRandPaste()}} before={<Icon28Dice5Outline/>}>\n\t\t\t\t\t\t\t\t\t\t\tСлучайная паста\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button stretched size=\"l\" mode=\"secondary\" onClick={\n\t\t\t\t\t\t\t\t\t\t\t() => {getPaste()}} before={<Icon28ViewOutline/>}>\n\t\t\t\t\t\t\t\t\t\t\tНеоцененная паста\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t</Group>\n\t\t\t\t\t\t\t</FixedLayout>\n\t\t\t\t\t\t</Group>\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t{snackbar}\n\t\t\t\t</Panel>\n\t\t\t</View>\n\n\t\t\t<Top id='top' fetchedUser={fetchedUser} go={go} gopanel={onStoryChange}/>\n\n\t\t</Epic>\n\t)\n};\n\nHome.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\t\ttitle: PropTypes.string,\n\t\t}),\n\t}),\n};\n\nexport default Home;\n","import React, {useState, useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport bridge from '@vkontakte/vk-bridge';\r\n\r\nimport { Panel, PanelHeader, PanelHeaderBack, Group, Header, View, ScreenSpinner, Div, Card, Cell, Avatar } from '@vkontakte/vkui';\r\nimport { Icon16Favorite } from '@vkontakte/icons';\r\n\r\nconst Marks = props => {\r\n\tconst [pastes, setPastes] = useState([])\r\n\tconst [you, setYou] = useState(null);\r\n\tconst [popout, setPopout] = useState(null);\r\n\r\n    var options = {\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n      };\r\n\r\n\tfunction getYou() {\r\n\t\tsetPopout(<ScreenSpinner/>)\r\n\r\n\t\tfetch('https://lpjakewolfskin.ru/api/v1/member/get_vk/' + props.member)\r\n\t\t  .then(response => {\r\n\t\t\t\tif (!response.ok) {\r\n\t\t\t\t\tthrow new Error(response.statusText)\r\n\t\t\t\t}\r\n\t\t\t\treturn response.json()\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t\t  .then(you => {\r\n\t\t\tsetPopout(null)\r\n\t\t\tsetYou(you)\r\n\t\t  })\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tgetYou()\r\n\t  }, [])\r\n\r\n\treturn (\r\n\t\t<View activePanel={props.id} popout={popout}>\r\n\t\t\t<Panel id={props.id}>\r\n\t\t\t\t<PanelHeader\r\n\t\t\t\t\tleft={<PanelHeaderBack onClick={props.go} data-to=\"top\"/>}\r\n\t\t\t\t>\r\n\t\t\t\t\tОценки\r\n\t\t\t\t</PanelHeader>\r\n\t\t\t\t<Group header={<Header mode=\"secondary\">Информация</Header>}>\r\n\t\t\t\t\t<Cell\r\n\t\t\t\t\t\tdescription={you ? \"Всего оценок: \" + you.cnt + ', средняя: ' + you.avg : \"\"}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{you ? you.name : \"\"}\r\n\t\t\t\t\t</Cell>\r\n\t\t\t\t</Group>\r\n\t\t\t\t<Group header={<Header mode=\"secondary\">Пасты</Header>}>\r\n\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t{   you &&\r\n\t\t\t\t\t\t\tyou.marks.map( (mark, index) => {\r\n                                let date = new Date(mark.created_at)\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\t\t\t\tonClick={props.go}\r\n\t\t\t\t\t\t\t\t\t\tdata-to=\"home\"\r\n\t\t\t\t\t\t\t\t\t\tdata-payload={mark.paste.id}\r\n\t\t\t\t\t\t\t\t\t\tkey={mark.paste.id} \r\n\t\t\t\t\t\t\t\t\t\tstyle={{marginBottom: \".5rem\"}}\r\n\t\t\t\t\t\t\t\t\t\tdescription={date.toLocaleString(\"ru\", options)}\r\n\t\t\t\t\t\t\t\t\t\tbefore={<Cell disabled style={{alignItems: \"center\", textAlign: \"center\"}}>{mark.mark} <Icon16Favorite/></Cell>}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{mark.paste.anno} \r\n\t\t\t\t\t\t\t\t\t</Cell>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t</Group>\r\n\t\t\t</Panel>\r\n\t\t</View>\r\n\t)\r\n}\r\n\r\nMarks.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Marks;\r\n","import React, { useState, useEffect } from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Top from './panels/Top';\nimport Marks from './panels/Marks';\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [pastePreloaded, setPastePreloaded] = useState(null);\n\tconst [member, setMember] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t\tsetPastePreloaded(e.currentTarget.dataset.payload)\n\t\tsetMember(e.currentTarget.dataset.member)\n\t};\n\n\treturn (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t\t\t{fetchedUser && <Home id='home' fetchedUser={fetchedUser} go={go} pastePreloaded={pastePreloaded}/>}\n\t\t\t\t\t{fetchedUser && <Top id='top' fetchedUser={fetchedUser} go={go}/> }\n\t\t\t\t\t<Marks id='marks' go={go} member={member}/>\n\t\t\t\t</View>\n\t\t\t</AppRoot>\n\t\t</AdaptivityProvider>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\nimport './index.css';\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}