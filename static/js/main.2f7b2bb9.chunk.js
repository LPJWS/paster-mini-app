(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(21),i=n.n(s),r=n(17),o=n.n(r),a=n(20),l=n.n(a),j=n(22),d=n(18),h=n(6),u=(n(128),n(134)),b=n(135),f=n(136),O=n(133),p=n(5),x=function(e){var t=e.id,n=(e.go,e.fetchedUser),s=Object(c.useState)(null),i=Object(d.a)(s,2),r=i[0],a=i[1],x=Object(c.useState)(null),m=Object(d.a)(x,2),g=m[0],y=m[1],k=Object(c.useState)(null),v=Object(d.a)(k,2),w=v[0],C=v[1];function z(){return S.apply(this,arguments)}function S(){return S=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(Object(p.jsx)(h.l,{})),fetch("https://lpjakewolfskin.ru/api/v1/paste/get/unrelated/?vk_id="+n.id).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(e){C(null),a(e)}));case 2:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function R(e){fetch("https://lpjakewolfskin.ru/api/v1/paste/relate/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id,vk_id:n.id,mark:e})}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(){y(Object(p.jsx)(h.m,{onClose:function(){return y(null)},children:"\u041f\u0430\u0441\u0442\u0430 \u043e\u0446\u0435\u043d\u0435\u043d\u0430"}))}))}return Object(c.useEffect)((function(){z()}),[]),Object(p.jsx)(h.n,{activePanel:t,popout:w,children:Object(p.jsxs)(h.i,{id:t,children:[Object(p.jsx)(h.j,{children:"\u041f\u0410\u0421\u0422\u0415\u0420"}),r&&Object(p.jsxs)(h.g,{header:Object(p.jsxs)(h.h,{mode:"secondary",children:["\u0414\u0430\u043d\u043d\u0443\u044e \u043f\u0430\u0441\u0442\u0443 \u043e\u0446\u0435\u043d\u0438\u043b\u0438 ",r.cnt," \u0440\u0430\u0437, \u0440\u0435\u0439\u0442\u0438\u043d\u0433 - ",r.rating]}),children:[Object(p.jsx)(h.e,{children:Object(p.jsx)(h.d,{size:"l",mode:"shadow",style:{marginBottom:"1rem"},children:Object(p.jsx)(h.e,{style:{padding:".5rem"},children:Object(p.jsx)("p",{children:r.clear_text})})})}),Object(p.jsxs)(h.g,{header:Object(p.jsx)(h.h,{mode:"secondary",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0430\u0441\u0442\u0443"}),children:[Object(p.jsxs)(h.e,{style:{display:"flex"},children:[Object(p.jsxs)(h.c,{stretched:!0,size:"l",style:{marginRight:8},mode:"destructive",onClick:function(){R(1)},children:["1 ",Object(p.jsx)(O.a,{})]}),Object(p.jsxs)(h.c,{stretched:!0,size:"l",style:{marginRight:8},mode:"destructive",onClick:function(){R(2)},children:["2 ",Object(p.jsx)(O.a,{})]}),Object(p.jsxs)(h.c,{stretched:!0,size:"l",style:{marginRight:8},mode:"secondary",onClick:function(){R(3)},children:["3 ",Object(p.jsx)(O.a,{})]}),Object(p.jsxs)(h.c,{stretched:!0,size:"l",style:{marginRight:8},mode:"commerce",onClick:function(){R(4)},children:["4 ",Object(p.jsx)(O.a,{})]}),Object(p.jsxs)(h.c,{stretched:!0,size:"l",style:{marginRight:8},mode:"commerce",onClick:function(){R(5)},children:["5 ",Object(p.jsx)(O.a,{})]})]}),Object(p.jsx)(h.e,{style:{paddingBottom:"9rem"},children:Object(p.jsx)(h.c,{stretched:!0,size:"l",style:{marginRight:8},mode:"primary",onClick:function(){o.a.send("VKWebAppShare",{link:r.link})},before:Object(p.jsx)(u.a,{}),children:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"})})]}),Object(p.jsx)(h.f,{filled:!0,vertical:"bottom",children:Object(p.jsx)(h.g,{header:Object(p.jsx)(h.h,{mode:"secondary",children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0430\u0441\u0442\u0443"}),children:Object(p.jsxs)(h.e,{style:{display:"flex"},children:[Object(p.jsx)(h.c,{stretched:!0,size:"l",style:{marginRight:8},mode:"secondary",onClick:function(){C(Object(p.jsx)(h.l,{})),fetch("https://lpjakewolfskin.ru/api/v1/paste/get/rand/").then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).catch((function(e){console.log(e)})).then((function(e){C(null),a(e)}))},before:Object(p.jsx)(b.a,{}),children:"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u0430\u044f \u043f\u0430\u0441\u0442\u0430"}),Object(p.jsx)(h.c,{stretched:!0,size:"l",mode:"secondary",onClick:function(){z()},before:Object(p.jsx)(f.a,{}),children:"\u041d\u0435\u043e\u0446\u0435\u043d\u0435\u043d\u043d\u0430\u044f \u043f\u0430\u0441\u0442\u0430"})]})})})]}),g]})})},m=(n(130),function(){var e=Object(c.useState)("home"),t=Object(d.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(null),r=Object(d.a)(i,2),a=r[0],u=r[1],b=Object(c.useState)(Object(p.jsx)(h.l,{size:"large"})),f=Object(d.a)(b,2),O=f[0],m=f[1];Object(c.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,u(t),m(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;if("VKWebAppUpdateConfig"===n){var s=document.createAttribute("scheme");s.value=c.scheme?c.scheme:"client_light",document.body.attributes.setNamedItem(s)}})),function(){e.apply(this,arguments)}()}),[]);return Object(p.jsx)(h.a,{children:Object(p.jsx)(h.b,{children:Object(p.jsx)(h.n,{activePanel:n,popout:O,children:a&&Object(p.jsx)(x,{id:"home",fetchedUser:a,go:function(e){s(e.currentTarget.dataset.to)}})})})})});n(131);o.a.send("VKWebAppInit"),i.a.render(Object(p.jsx)(m,{}),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.2f7b2bb9.chunk.js.map